- name: Download Neovim release tarball
  get_url:
    url: "https://github.com/neovim/neovim/releases/latest/download/nvim-linux-x86_64.tar.gz"
    dest: "/tmp/nvim-linux-x86_64.tar.gz"
    mode: '0644'

- name: Extract Neovim into ~/.local
  unarchive:
    src: "/tmp/nvim-linux-x86_64.tar.gz"
    dest: "{{ lookup('env','HOME') }}/.local"
    remote_src: true
    extra_opts:
      - "--strip-components=1"
